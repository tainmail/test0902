<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>父</title>
<script src="js/jquery.js"></script>
</head>

<body>
<h1>父</h1>

<!--iframe 結構 開始-->
<iframe src="https://dl.dropboxusercontent.com/u/1252406/1/2016-0830/iframe%20script/demo/son.htm" width="100" height="100" marginwidth="0" marginheight="0" frameborder="1" scrolling="no" allowtransparency="true"></iframe>
<!--iframe 結構 結束-->

<script>

$(function(){
	
	function fnGo(){
		var sTxt = '\
			<div class="ad_300" style="width:310px; height:260px; border:5px dashed red; position:relative;">\
				<span class="btn_close" style="display:block; width:50px; height:50px; border:1px solid green; background:gold; position:absolute; right:5px; top:5px;">X</span>\
				<img style="display:block;" src="images/300x250-05.jpg" />\
			</div>\
		';
		
		$("body").prepend(sTxt);
		
		$(".ad_300 .btn_close").on("click", function(){
			$(".ad_300").hide();
		})
	
	}
	
	//父接子
	$(window)[0].addEventListener("message",function(e){
		console.log("父視窗data接到的值=", e.data);
		console.log("父視窗origin來源網域=", e.origin);
		console.log("父視窗source window物件=", e.source);
		if(e.origin == "https://dl.dropboxusercontent.com"){
			$('body').css({"background":"purple"})
		}
		if(e.data == "台哥大"){
			alert(e.data)
			fnGo();
		}	
	},false);
	
});


</script>
</body>
</html>
