<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1; minimum-scale=1, maximum-scale=1" />
<title>拖拉</title>
<script src='js/jquery.js'></script>

<!--taintestinfo 測試開始-->
<script>
$.extend({
	tainTestInfo: function(options){
		var defaults = {className:"info", amount:3, width:200, posH:"right", posV:"top"};
		var settings = $.extend( defaults, options);
		var sTestInfoHtml='';
		sTestInfoHtml += '<div class="'+settings.className+'" style="width:'+settings.width+'px; height:auto; padding:10px; background-color:rgba(0, 0, 0, 0.5); position:fixed; '+settings.posH+':0px; '+settings.posV+':0px;  z-index:1000;">'
		for(var i=0; i<settings.amount; i++){
			sTestInfoHtml += '<div class="'+settings.className+'_'+i+'" style="border:1px solid #000; margin-bottom:5px; color:#fff;">無</div>';
		};
		sTestInfoHtml += '</div>'
		$("body").append(sTestInfoHtml);
	}
});


$(function(){
	$.tainTestInfo({className:"info", amount:3, width:200, posH:"left", posV:"bottom"}); 
	$(".info_0").html("成功")
});
</script>
<!--taintestinfo 測試結束-->

<script src="js/jquery.event.drag-2.2.js"></script>
<style>
*{ margin:0px; padding:0px; font-family: "微軟正黑體";}
* { 
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;

}

/*清除 clearfix*/
.clearfix:after { content: "."; display: block; height: 0; clear: both; visibility: hidden; }
.clearfix {*zoom: 1; _zoom: 1; }

/*控制pre*/
pre { border:2px solid pink; padding:5px; font-size:12px; background:#fff; clear:both; font-size:12px; font-family:Verdana;}
pre strong { color:#CC0000; }
pre em { font-style:normal; font-weight:bold; color:#006600; }


.wrapper{ width:320px; height:320px; border:1px solid red; position:relative;}
.box{ width:100px; height:300px; background:gold; border:5px solid red;}

.box_2{ position:absolute; left:200px; top:0px;}
</style>
<script>





$(function(){
	
	
	$(".box").on("touchstart", function(event){
		var $Box = $(this);
		var lastOffset = $Box.data("lastTransform");
		var lastOffsetX = lastOffset ? lastOffset.dx :0;
		var startX  = event.pageX - lastOffsetX;
		var newDx
		
		$(document).on("touchmove", function(event){
			newDx = event.pageX - startX ;
			$(".info_1").html(newDx)
			if(newDx<=0){
				$Box.css('transform','translate(' + newDx + 'px, 0px)');
				$Box.data('lastTransform', {dx: newDx});
				if(newDx <= -150){
					$Box.hide();
				};	
			};
		});
		
		
		$(document).on("touchend",function(){
			if(newDx > -150){
				newDx=0
				$Box.css('transform','translate(0px, 0px)');
				$Box.data('lastTransform', {dx: newDx});
				$(".info_1").html(newDx)
			};
			$(this).off("touchmove");
		});
		
	});
	
		
	

});


</script>
</head>
<body>

<div class="wrapper">


    <div class="box box_2">推拉移動-150後隱藏</div>

</div>


</body>
</html>
