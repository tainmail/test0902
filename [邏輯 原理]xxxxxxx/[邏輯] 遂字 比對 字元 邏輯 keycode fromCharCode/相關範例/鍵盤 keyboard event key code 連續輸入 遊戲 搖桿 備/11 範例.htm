<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>鍵盤 事件 連續輸入</title>

<script src="jquery.js"></script>


<!--taintestinfo 測試開始-->
<script>
$.extend({
	tainTestInfo: function(options){
		var defaults = {className:"info", amount:3, width:200, posH:"right", posV:"top"};
		var settings = $.extend( defaults, options);
		var sTestInfoHtml='';
		sTestInfoHtml += '<div class="'+settings.className+'" style="width:'+settings.width+'px; height:auto; padding:10px; background-color:rgba(0, 0, 0, 0.5); position:fixed; '+settings.posH+':0px; '+settings.posV+':0px;  z-index:1000;">'
		for(var i=0; i<settings.amount; i++){
			sTestInfoHtml += '<div class="'+settings.className+'_'+i+'" style="border:1px solid #000; margin-bottom:5px; color:#fff;">--</div>';
		};
		sTestInfoHtml += '</div>'
		$("body").append(sTestInfoHtml);
	}
});


$(function(){
	$.tainTestInfo({className:"info", amount:3, width:200, posH:"right", posV:"bottom"}); 
	$(".info_0").html("--");
});
</script>
<!--taintestinfo 測試結束-->


<script>
$(function(){
	
	function fnGo(){
		 $(".info_0").append("執行--");
		 $(".lightbox3").addClass("active"); //lightbox 開
	}
	
	function fnClearBuffer(){
		codeBuffer = "";
		$(".info_1").html("--");///////
	};
	
	var code1 = String.fromCharCode(38,38,40,40); //本例是上上下下。 把keyboard code 轉成對應字元
	var codeBuffer = "";
	var oClearTimer = null;
	
	$(document).keyup(function(e){
		
		if(oClearTimer){clearTimeout(oClearTimer)} //3秒要輸入完
		oClearTimer = setTimeout(fnClearBuffer, 3000);
		
		codeBuffer += String.fromCharCode(e.which); //接收已輸入
		
		$(".info_1").html(codeBuffer);//////
		
		if (code1.substring(0, codeBuffer.length) == codeBuffer){  //遂字比對目前輸出
			if (code1.length == codeBuffer.length) {   //滿足所有字元
				fnGo();
				fnClearBuffer();
            }
		}else{
			fnClearBuffer();
		}
	});
	
		
	
	//lightbox 關
	$(".lightbox3 .overlap").click(function(){
		$(".lightbox3").removeClass("active");
	});
	
});



</script>

</head>

<body>
<h1>鍵盤 事件 連續輸入</h1>

<p>本例： 鍵盤輸入 「上上下下」 會出現訊息</p>

<style>
/*================*/
.lightbox3{ width:100%; height:100%;  position:fixed; left:0; top:0px; z-index:200; display:none;}
.lightbox3.active{ display:block;}

.lightbox3 .overlap{width:100%; height:100%; background-color:rgba(255,255,255, 0.8); position:absolute; left:0; top:0;}
.lightbox3 .overlap .btn_close{ display:block; width:80px; height:40px; line-height:40px; text-align:center; color:#ccc; position:absolute;   right:10px; top:10px;  border-radius:20px;  background: #333;}
.lightbox3 .overlap .btn_close:hover{ color:#FFF;}
.lightbox3 .box{ width:280px; min-height:120px; margin:100px auto 0px auto; padding:10px; background-color:#fff; border:10px solid  #ccc; border-radius:20px; position:relative;}


</style>


<!--得獎公布 開始-->
<div class="lightbox3">
    <div class="overlap"><a class="btn_close" href="#">CLOSE</a></div>
    <div class="box">
        <h3>你按了指定按鍵</h3>
    </div>
</div>
<!--得獎公布 結束-->





</body>
</html>
