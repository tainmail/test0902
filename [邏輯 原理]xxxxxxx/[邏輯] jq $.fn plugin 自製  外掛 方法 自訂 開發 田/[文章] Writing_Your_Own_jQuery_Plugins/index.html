<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">

<link href="favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">	
<link rel="profile" href="http://gmpg.org/xfn/11">





<link rel="pingback" href="http://blog.teamtreehouse.com/xmlrpc.php">
<!--[if lt IE 9]>
<script src="http://blog.teamtreehouse.com/wp-content/themes/treehouse/js/html5.js" type="text/javascript"></script>
<![endif]-->







<!-- This site is optimized with the Yoast WordPress SEO plugin v1.4.13 - http://yoast.com/wordpress/seo/ -->
<title>Writing Your Own jQuery Plugins - Treehouse Blog</title>
<meta name="description" content="Learn how to write your own jQuery plugins, complete with options and callbacks in this step-by-step tutorial.">
<link rel="canonical" href="http://blog.teamtreehouse.com/writing-your-own-jquery-plugins">
<link rel="publisher" href="https://plus.google.com/110278003536476194286/">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Writing Your Own jQuery Plugins - Treehouse Blog">
<meta property="og:description" content="Learn how to write your own jQuery plugins, complete with options and callbacks in this step-by-step tutorial.">
<meta property="og:url" content="http://blog.teamtreehouse.com/writing-your-own-jquery-plugins">
<meta property="og:site_name" content="Treehouse Blog">
<meta property="og:image" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/jqueryblog-1024x294.jpg">
<meta property="og:image" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/finder.png">
<meta property="og:image" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/before.png">
<meta property="og:image" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/after.png">
<meta property="og:image" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/despues.png">
<meta property="og:image" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/apres-1024x597.png">
<meta property="og:image" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/complete.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@treehouse">
<meta name="twitter:domain" content="Treehouse Blog">
<meta name="twitter:creator" content="@taupecat">
<meta name="twitter:image:src" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/jqueryblog-300x86.jpg">
<meta name="twitter:image:src" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/finder.png">
<meta name="twitter:image:src" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/before.png">
<meta name="twitter:image:src" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/after.png">
<meta name="twitter:image:src" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/despues.png">
<meta name="twitter:image:src" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/apres-1024x597.png">
<meta name="twitter:image:src" content="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/complete.png">
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="Treehouse Blog » Feed" href="http://blog.teamtreehouse.com/feed">
<link rel="alternate" type="application/rss+xml" title="Treehouse Blog » Comments Feed" href="http://blog.teamtreehouse.com/comments/feed">

            
			<link rel="alternate" type="application/rss+xml" title="Treehouse Blog » Writing Your Own jQuery Plugins Comments Feed" href="http://blog.teamtreehouse.com/writing-your-own-jquery-plugins/feed">





<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.teamtreehouse.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.teamtreehouse.com/wp-includes/wlwmanifest.xml"> 
<link rel="shortlink" href="http://blog.teamtreehouse.com/?p=21509">
	
<link href="chrome://translator/skin/floatingPanel.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="index.css" media="all">
</head>
<body data-twttr-rendered="true" class="single single-post postid-21509 single-format-standard singular two-column right-sidebar">
<div id="page" class="hfeed">
<div id="main">
<section id="primary">
<div class="inner">
<div id="content" role="main">
<article id="post-21509" class="post-21509 post type-post status-publish format-standard hentry category-jquery category-learn-to-code tag-jquery-plugins-tutorial tag-jquery-tutorials">
<!--DOCUMENT_FRAGMENT-->
<header class="entry-header"><h1 class="entry-title">Writing Your Own jQuery Plugins</h1>

				<div class="entry-meta">
			<span class="sep"></span><a href="http://blog.teamtreehouse.com/writing-your-own-jquery-plugins" title="9:30 am" rel="bookmark"><time class="entry-date" datetime="2013-03-18T09:30:39+00:00" pubdate="">Mar 18, 2013</time></a><span class="by-author"> </span>		</div><!-- .entry-meta -->
		
		<div class="single-entry-meta">
		<a class="author" href="http://blog.teamtreehouse.com/author/tracyrotton">Tracy Rotton</a><span class="bullet">●</span><span class="category"><a href="http://blog.teamtreehouse.com/category/code/jquery" title="View all posts in jQuery" rel="category tag">jQuery</a>, <a href="http://blog.teamtreehouse.com/category/learn-to-code" title="View all posts in Learn to Code" rel="category tag">Learn to Code</a></span>
		<span class="bullet ss-record"></span><a data-disqus-identifier="21509 http://blog.teamtreehouse.com/?p=21509" href="http://blog.teamtreehouse.com/writing-your-own-jquery-plugins#disqus_thread">27 Comments</a>
		
		</div>

	</header><!-- .entry-header -->

	<div class="entry-content">
		<img src="jqueryblog.jpg" class="attachment- wp-post-image" alt="jqueryblog" height="576" width="2000"> 
		<a id="dd_start"></a><p><a href="http://jquery.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://jquery.com']);">jQuery</a> is great. It’s cross-browser, easy to learn, and makes adding interactivity to your website a breeze. It also comes with plenty of <a href="http://plugins.jquery.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://plugins.jquery.com']);">plugins</a> to do almost whatever you need it to do.</p>
<p>But what if you can’t find just the right plugin to suit your needs? Or you’re just looking to keep your project <a href="http://en.wikipedia.org/wiki/Don" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://en.wikipedia.org']);" t_repeat_yourself"="">DRY</a> by combining some oft-used functionality into one nice, neat package? The solution might be to roll your own plugin to meet exactly your needs.</p>
<p>Writing your own jQuery plugin isn’t as hard as it might seem at first. This tutorial will go through the process of writing a simple plugin, adding some options, and even perform a callback.</p>
<h2>Setting Up</h2>
<p>We’ll start with the old chesnut of programming tutorials, a “Hello, World!” plugin. Before we can do anything, we need to establish our file and link it to our HTML document. First, we’ll create our plugin file and put it in the “js” directory of our website. It’s traditional to start our filename with “jquery,” followed by the actual plugin name, so we’ll call this “jquery.hello-world.js”.</p>
<div id="attachment_21516" class="wp-caption alignnone" style="width: 770px;"><a href="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/finder.png"><img class="size-full wp-image-21516" alt="Our web directory." src="finder.png" height="448" width="760"></a><p class="wp-caption-text">Our “Hello, World!” plugin, snuggly next to our jQuery core file.</p></div>
<p>Next, we’ll need to make sure our plugin file, as well as it’s jQuery core big brother, are linked in our HTML file, so place the following two lines at the bottom of your HTML document, just before the closing <code>&lt;/body&gt;</code> tag:</p>
<pre><code>&lt;script src="js/jquery-1.9.1.min.js"&gt;&lt;/script&gt;
&lt;script src="js/jquery.hello-world.js"&gt;&lt;/script&gt;
</code></pre>
<h2>The jQuery Plugin Structure</h2>
<p>jQuery comes with all the necessary hooks to build your plugin file easily. But we still want to be mindful of good JavaScript practices, and make sure we keep everything inside a local scope. We’ll start with the very basic shell of a traditional jQuery plugin:</p>
<pre><code>(function($) {

    $.fn.helloWorld = function() {

        // Future home of "Hello, World!"

    }

}(jQuery));
</code></pre>
<p>Let’s take a quick moment to understand what’s going on. By including everything in the <code>(function() {})</code> self-enclosed JavaScript pattern, we’re making sure that all the variables in our plugin will stay safely outside of the global namespace. We don’t want to cause any collisions with any other JavaScript used on the page, after all.</p>
<p>The other thing you might notice is that we’re defining our plugin as if jQuery was in it’s “no-conflict” mode. Again, we’re seeking to avoid colliding with other JavaScript on the page, and thus we want to make sure that our plugin isn’t reliant on the default <code>$</code>, which could be used by another library.</p>
<p>Finally, <code>$.fn</code> is jQuery’s way of allowing you to define your plugin, which we’ve named <code>helloWorld</code>. With all of our pieces in place, let’s actually do something!</p>
<h2>Making Our Plugin Do Something</h2>
<p>For our plugin, we’re going to do something pretty silly, but also simple enough for our demonstration purposes, and that is to change all the text for the acted upon elements with (what else?) the text “Hello, World!”.</p>
<pre><code>(function($) {

    $.fn.helloWorld = function() {

        this.each( function() {
            $(this).text("Hello, World!");
        });

    }

}(jQuery));
</code></pre>
<p>When we’re invoking the plugin by attaching it to a jQuery selector, the object we’re acting upon is already a jQuery object, so we don’t need to wrap it in the <code>$(this)</code> structure you’re used to. However, once we start looping through each instance of the matching selector, we use the <code>$(this)</code> structure as we would any time we ran our selectors through <code>$.each()</code>.</p>
<p>Suppose we wanted to change the text of all of our <code>&lt;h2&gt;</code> headers on the following page:</p>
<div id="attachment_21513" class="wp-caption alignnone" style="width: 770px;"><a href="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/before.png"><img class="size-full wp-image-21513" alt="A screenshot of our web page before we run our &quot;Hello, World!&quot; plugin." src="before.png" height="443" width="760"></a><p class="wp-caption-text">Our web page, ripe for the text swapping via jQuery.</p></div>
<p>We would invoke the plugin as you’re already familiar, like so:</p>
<pre><code>&lt;script&gt;
$(document).ready( function() {
    $('h2').helloWorld();
});
&lt;/script&gt;
</code></pre>
<p>To yield this:</p>
<div id="attachment_21511" class="wp-caption alignnone" style="width: 770px;"><a href="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/after.png"><img class="size-full wp-image-21511" alt="A screenshot of our webpage with the <h2> headers swapped out with &quot;Hello, World!&quot;" src="after.png" height="443" width="760"></a><p class="wp-caption-text">Seems silly, I know, but we’ve now replaced all the &lt;h2&gt; headers with “Hello, World!”</p></div>
<p>We’re not quite done yet. While our plugin technically <em>works</em>, it’s living in its own little isolated world. That is, if you try and <em>chain</em> another jQuery action onto it, nothing’s going to happen because our plugin has led to a dead end. To fix this, be sure to <em>return</em> the results of the plugin as it loops through the DOM elements:</p>
<pre><code>(function($) {

    $.fn.helloWorld = function() {

        return this.each( function() {
            $(this).text("Hello, World!");
        });

    }

}(jQuery));
</code></pre>
<p>And congratulations! You’ve just written you’re first jQuery plugin!</p>
<h2>But Wait, There’s More!</h2>
<p>Now that you’re all happy that you’ve built your jQuery plugin, your boss comes back and says that they need to be able to translate the site into Spanish. Uh oh, what do we do now?</p>
<p>Well, we could start by just adding an argument. Let’s take our plugin above, and instead of hard-coding the text into the plugin, we can replace it with a variable and pass that along when we invoke the plugin.</p>
<pre><code>(function($) {

    $.fn.helloWorld = function( customText ) {

        return this.each( function() {
            $(this).text( customText );
        });

    }

}(jQuery));
</code></pre>
<p>There, now we can pass any text we’d like to our plugin. Our offices in Madrid have given us the Spanish translation we need, which we now use as the parameter of our plugin:</p>
<pre><code>&lt;script&gt;
$(document).ready( function() {
    $('h2').helloWorld('¡Hola, mundo!');
});
&lt;/script&gt;
</code></pre>
<p>Our web page now looks like this:</p>
<div id="attachment_21515" class="wp-caption alignnone" style="width: 770px;"><a href="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/despues.png"><img class="size-full wp-image-21515" alt="Screenshot of our &quot;Hello, World!&quot; plugin in Spanish." src="despues.png" height="443" width="760"></a><p class="wp-caption-text">Our plugin, with “Hello, World!” translated into Spanish.</p></div>
<h2>Complete Customization FTW</h2>
<p>But already we’re a little nervous. What if no text was passed when we called the plugin? As it’s written, the plugin would simply blank out the text of our matched elements, and we probably don’t want <em>that</em>. Also, our boss has already come back to us once asking to make a variable. What if he wants more customization options? Simply adding options <em>ad infinitum</em> isn’t going to work in the long term. A more future-proof solution is the <code>options</code> object.</p>
<p>We already know that the specific text needs to be customizable. Now our boss is asking that the text color and font style be customizable as well. (Yes, I know these are simple options to chain onto our selector via built-in jQuery functions, but go with me here.) Let’s add an options object to our plugin, along with some sensible defaults using the <code>$.extend</code> method:</p>
<pre><code>(function($) {

    $.fn.helloWorld = function( options ) {

        // Establish our default settings
        var settings = $.extend({
            text         : 'Hello, World!',
            color        : null,
            fontStyle    : null
        }, options);

        return this.each( function() {
            // We'll get back to this in a moment
        });

    }

}(jQuery));
</code></pre>
<p>Now we have a <code>settings</code> object that, when the plugin is invoked devoid of any parameters, will use what we’ve established as the default text. We also have two other properties of our <code>settings</code> object, “color” and “fontStyle”, that have no default beyond <code>null</code>. For this plugin, we don’t <em>need</em> to establish any color or font style beyond what is laid out in our CSS, but they’re there for the overriding if we want. We just have to make use of them:</p>
<pre><code>return this.each( function() {
    $(this).text( settings.text );

    if ( settings.color ) {
        $(this).css( 'color', settings.color );
    }

    if ( settings.fontStyle ) {
        $(this).css( 'font-style', settings.fontStyle );
    }
});
</code></pre>
<p>Since the purpose of this plugin is to replace text, it makes sense to <em>always</em> replace the text with whatever is provided, which is why it also makes sense to provide a default value so that <em>something</em> appears if the plugin is invoked without any options. But the color and font style options are tested for and only acted upon if they are provided.</p>
<p>Our boss has come back and says now they’re going to translate the site into French, and beyond that they want the text to be blue and italic. Fortunately, our plugin can now handle all these requests:</p>
<pre><code>$('h2').helloWorld({
    text        : 'Salut, le monde!',
    color       : '#005dff',
    fontStyle   : 'italic'
});
</code></pre>
<div id="attachment_21512" class="wp-caption alignnone" style="width: 594px;"><a href="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/apres.png"><img class="size-large wp-image-21512" alt="A screenshot of our web page, now in French with blue, italic text." src="apres-1024x597.png" height="340" width="584"></a><p class="wp-caption-text">With several options available to us, our plugin can now speak French, and even change the appearance of the text.</p></div>
<p><em>Et voilà</em>! We now have a plugin with a number of possible objects, and the ability to easily add more (or subtract what’s there) in the future without impacting legacy users of the plugin. Hooray for maintainability!</p>
<p>But our boss has come back with yet another request: once the plugin has completed whatever task it was called to do, it should sound an alert informing us of that fact. For this, we have two options: either quit because our boss has obviously never heard of a requirements document, or go the less drastic route and give our plugin the ability to handle <em>callbacks</em>.</p>
<p>Callbacks are options to JavaScript functions that are themselves JavaScript functions. They’re also not unique to jQuery. Again, it may seem like it would be a complicated thing to do, but actually it’s quite simple.</p>
<p>All we need is to establish one more variable in our options object:</p>
<pre><code>// Establish our default settings
var settings = $.extend({
    text         : 'Hello, World!',
    color        : null,
    fontStyle    : null,
    complete     : null
}, options);
</code></pre>
<p>Now we have a “complete” variable to perform an action when, well, our plugin completes its action. To invoke it, we’ll want to make sure that what we’re given is actually a function. Fortunately, jQuery helps us with this with the <code>$.isFunction</code> test:</p>
<pre><code>return this.each( function() {
    // Our plugin so far

    if ( $.isFunction( settings.complete ) ) {
        settings.complete.call( this );
    }
});
</code></pre>
<p>On the invocation side, our code becomes:</p>
<pre><code>$('h2').helloWorld({
    text        : 'Salut, le monde!',
    color       : '#005dff',
    fontStyle   : 'italic',
    complete    : function() { alert( 'Done!' ) }
});
</code></pre>
<p>And as a result, we see our callback as our plugin is executed:</p>
<div id="attachment_21514" class="wp-caption alignnone" style="width: 770px;"><a href="http://blog.teamtreehouse.com/wp-content/uploads/2013/03/complete.png"><img class="size-full wp-image-21514" alt="Screenshot of our web page displaying an alert." src="complete.png" height="444" width="760"></a><p class="wp-caption-text">Our plugin now displays an alert every time it executes, thanks to our callback.</p></div>
<h2>Conclusion</h2>
<p>Custom jQuery plugins are a great option when you know you’re going to be doing a lot of the same things over and over in your JavaScript. By writing your own jQuery plugin, you’re both keeping your code DRY and your global namespace nice and clean.</p>
<p>If you’d like to play around with the code from this example, you can grab it from <a href="https://github.com/taupecat/jquery-plugin" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://github.com']);">my GitHub</a>.</p>
<a id="dd_end"></a>			</div><!-- .entry-content -->

	<a href="http://teamtreehouse.com/join/start-learning-free?utm_source=article-cta&amp;utm_medium=blog&amp;utm_campaign=treehouse-blog&amp;cid=1000">
		</a><div class="start-learning-cta"><a href="http://teamtreehouse.com/join/start-learning-free?utm_source=article-cta&amp;utm_medium=blog&amp;utm_campaign=treehouse-blog&amp;cid=1000">
			<p>Start Learning <strong>Web Design</strong>, <strong>Coding</strong>, <strong>How To Start A Business</strong> &amp; More for Free!</p><span class="diamond-narrow"></span>
			</a><a href="http://teamtreehouse.com/join/start-learning-free?utm_source=article-cta&amp;utm_medium=blog&amp;utm_campaign=treehouse-blog&amp;cid=1000" class="button orange">Learn More</a>
		</div>
	

	<footer class="entry-meta">
		
				
		<div id="author-description" class="clearfix">
			<div id="author-avatar">
				<img alt="" src="87614d3df1d317c01184d79088b8d52c" class="avatar avatar-140 photo" height="140" width="140">			</div><!-- #author-avatar -->
			<h2>Tracy Rotton</h2>
			<p>Tracy Rotton is a web developer for RP3 Agency in Bethesda, Maryland with a passion for standards-based front-end development.  A big fan of WordPress, she is a contributor to the new WordPress default theme, Twenty Thirteen.  When Tracy isn't building websites, she enjoys skiing, watching Redskins football and spending time with her two young children.</p></div></footer>
<!--/DOCUMENT_FRAGMENT-->
</article>
</div>
</div>
</section>
</div>
</div>
</body>
</html>
